# 浏览器存储

# cookie

- `Cookie` 的大小不超过4KB，且每次请求都会发送回服务器，占用额外的流量；
- 此外，`Cookies` 只能是字符串；
- 浏览器里存储 `Cookies` 的空间有限，很多用户禁止浏览器使用 `Cookies`；
- `Safari` 中 `Cookie` 不能存储中文字符；

# sessionStorage和localStorage

* 生命周期：localStorage数据是永久存储的，sessionStorage存储的数据在关闭了浏览器窗口后就会被销毁
* 存储大小：都为5MB
* 存储类型：字符串，可使用stringify和parse来存储复杂对象
* WebStorage不会传送到服务器，存储在本地的数据可以直接获取
* 同步操作

# Web SQL

`WebSQL` 也是一种在浏览器里存储数据的技术，跟 `IndexedDB` 不同的是，`IndexedDB` 更像是一个 `NoSQL` 数据库，而 `WebSQL` 更像是关系型数据库，使用 `SQL` 查询数据。

`IndexedDB` 是一种低级 `API` ，用于客户端存储大量结构化数据(包括, 文件/ `blobs`)。该 `API` 使用索引来实现对该数据的高性能搜索。

`IndexedDB` 不属于关系型数据库（不支持 `SQL` 查询语句），更接近 `NoSQL` 数据库。

# IndexedDB

`IndexedDB` 是一种浏览器端文档数据库，可以被网页脚本程序创建和操作。它允许储存大量数据，并且提供查询接口，且可以建立索引。



### 特点

* 键值对存储

* 属于异步操作

  `IndexedDB` 操作时不会锁死浏览器，用户依然可以进行其他操作，这与 `LocalStorage` 形成对比，因为后者是同步操作。

* 支持事务

  意味着一系列操作步骤之中，只要有一步失败，整个事务就都取消，数据库回滚到事务发生之前的状态，不存在只改写一部分数据的情况。

* 同源限制

  受到同源限制，每一个数据库对应创建它的域名。

* 存储空间大

  不少于250MB，甚至无上限

* 支持二进制存储

  `indexedDB` 不仅可以储存字符串，还可以储存二进制数据 `ArrayBuffer` 对象和 `Blob` 对象。

### 应用场景

1. 你的用户通过浏览器访问您的应用程序（浏览器）支持 `IndexedDB API` 吗 ?
2. 你需要存储大量的数据在客户端？
3. 你需要在一个大型的数据集合中快速定位单个数据点吗？
4. 你的架构在客户端需要事务支持吗？